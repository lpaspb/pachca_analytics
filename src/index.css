@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Основные цвета из дизайн-системы Пачка */
    --background: 0 0% 100%; /* gray1 #FFFFFF */
    --background-secondary: 220 33% 97%; /* gray2 #F7F8FC */
    --foreground: 220 10% 10%; /* gray12 #323437 */
    
    --card: 0 0% 100%; /* gray1 #FFFFFF */
    --card-foreground: 220 10% 10%; /* gray12 #323437 */
    --card-low: 0 0% 100%; /* gray1 #FFFFFF */
    --card-high: 220 33% 97%; /* gray2 #F7F8FC */
    
    --primary: 240 100% 56%; /* primary9 #4254FF */
    --primary-foreground: 0 0% 100%; /* white #FFFFFF */
    --primary-soft: 240 100% 95%; /* primary3 #F0F4FF */
    --primary-accent: 240 100% 60%; /* primary10 #3C40ED */
    
    --secondary: 210 20% 96%; /* gray3 #F0F1F5 */
    --secondary-foreground: 220 10% 10%; /* gray12 #323437 */
    
    --muted: 220 11% 73%; /* gray11 #6F7778 */
    --muted-foreground: 220 10% 40%; /* gray9 #8C9092 */
    --muted-icon: 220 8% 57%; /* gray9 #8C9092 */
    
    --accent: 220 7% 90%; /* gray3 #E3E4E8 */
    --accent-foreground: 220 10% 10%; /* gray12 #323437 */
    --accent-elevated: 220 7% 95%; /* gray3 с повышенной яркостью */
    
    --destructive: 0 83% 62%; /* error11 #EE6B6B */
    --destructive-foreground: 0 0% 100%; /* white #FFFFFF */
    --destructive-accent: 0 75% 58%; /* error9 #E5484D */
    
    --border: 220 7% 90%; /* gray6 #E3E4E8 */
    --input: 220 7% 90%; /* gray6 #E3E4E8 */
    --ring: 240 100% 56%; /* primary9 #4254FF */
    
    /* Дополнительные цвета */
    --tooltip: 220 13% 9%; /* gray12 #323437 */
    --tooltip-foreground: 210 20% 98%; /* white #FFFFFF */
    
    /* Цвета для всплывающих окон */
    --popover: 0 0% 100%; /* gray1 #FFFFFF */
    --popover-foreground: 220 10% 10%; /* gray12 #323437 */
    
    --green: 142 76% 36%; /* green11 #30D394 */
    --purple: 271 81% 56%; /* purple11 #8739E5 */
    --yellow: 38 92% 50%; /* yellow1 #FFAD3E */
    --warning: 38 92% 50%; /* yellow1 #FFAD3E */

    /* Цвета для кнопок из дизайн-системы */
    --button: 0 0% 100%; /* gray1 #FFFFFF */
    --button-accent: 220 7% 90%; /* gray2 #F7F8FC */
    --button-disabled: 220 7% 90%; /* gray3 #F0F1F5 */
    --button-icon-accent: 0 0% 4%; /* black-04% #00000000 */
  }

  .dark {
    /* Темная тема из дизайн-системы Пачка */
    --background: 225 10% 12%; /* gray1 #191D1E */
    --background-secondary: 225 10% 12%; /* gray2 #202324 */
    --foreground: 0 0% 93%; /* white #EDEDED */
    
    --card: 225 9% 14%; /* gray2 #202324 */
    --card-foreground: 0 0% 93%; /* white #EDEDED */
    --card-low: 225 10% 12%; /* gray1 #191D1E */
    --card-high: 225 9% 17%; /* gray3 #252928 */
    
    --primary: 236 72% 65%; /* Обновленный цвет primary */
    --primary-foreground: 0 0% 100%; /* white #FFFFFF */
    --primary-soft: 225 11% 15%; /* primary3 темная версия */
    --primary-accent: 240 100% 60%; /* primary10 #3C40ED */
    
    --secondary: 225 9% 17%; /* gray3 #252928 */
    --secondary-foreground: 0 0% 93%; /* white #EDEDED */
    
    --muted: 225 5% 31%; /* gray11 #9AA0A6 */
    --muted-foreground: 220 5% 47%; /* gray9 #687176 */
    --muted-icon: 220 5% 47%; /* gray9 #687176 */
    
    --accent: 225 9% 17%; /* gray3 #252928 */
    --accent-foreground: 0 0% 93%; /* white #EDEDED */
    --accent-elevated: 225 9% 20%; /* gray4 #2E3132 */
    
    --destructive: 0 83% 62%; /* error11 #EE6B6B */
    --destructive-foreground: 0 0% 93%; /* white #EDEDED */
    --destructive-accent: 0 75% 58%; /* error9 #E5484D */
    
    --border: 225 8% 20%; /* gray6 #313538 */
    --input: 225 9% 18%; /* gray5 #2E3132 */
    --ring: 240 100% 56%; /* primary9 #4254FF */
    
    /* Дополнительные цвета */
    --tooltip: 225 7% 19%; /* gray6 #313538 */
    --tooltip-foreground: 0 0% 93%; /* white #EDEDED */
    
    /* Цвета для всплывающих окон */
    --popover: 225 9% 14%; /* gray2 #202324 */
    --popover-foreground: 0 0% 93%; /* white #EDEDED */
    
    --green: 142 76% 36%; /* green11 #30D394 */
    --purple: 271 81% 56%; /* purple11 #8739E5 */
    --yellow: 38 92% 50%; /* yellow1 #FFAD3E */
    --warning: 38 92% 50%; /* yellow1 #FFAD3E */

    /* Цвета для кнопок из дизайн-системы */
    --button: 225 5% 11%; /* gray1-10% #9AA0A61A */
    --button-accent: 225 5% 31%; /* gray2 #9AA0A6 */
    --button-disabled: 225 9% 14%; /* gray2 #202324 */
    --button-icon-accent: 225 5% 31%; /* gray11-10% #9AA0A61A */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground font-sans text-base antialiased;
  }

  h1, .h1 {
    @apply text-2xl font-semibold;
  }

  h2, .h2 {
    @apply text-xl font-semibold;
  }

  h3, .h3 {
    @apply text-lg font-medium;
  }

  h4, .h4 {
    @apply text-base font-medium;
  }

  h5, .h5 {
    @apply text-sm font-medium;
  }

  code {
    @apply font-mono text-xs;
  }
}

/* Компоненты и классы для уведомлений (Notification Alert) из дизайн-системы */
.alert-info {
  @apply bg-primary-soft text-foreground rounded-md p-4;
}

.alert-warning {
  @apply bg-warning/10 text-warning rounded-md p-4;
}

.alert-error {
  @apply bg-destructive/10 text-destructive rounded-md p-4;
}

/* Бейджи из дизайн-системы */
.badge {
  @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium;
}

.badge-primary {
  @apply bg-primary text-primary-foreground;
}

.badge-secondary {
  @apply bg-secondary text-secondary-foreground;
}

.badge-outline {
  @apply border border-border text-foreground;
}

.badge-dot {
  @apply w-2 h-2 rounded-full;
}

/* Табы из дизайн-системы */
.tabs {
  @apply flex border-b border-border;
}

.tab {
  @apply px-3 py-2 text-sm font-medium border-b-2 border-transparent text-muted-foreground hover:text-foreground;
}

.tab-active {
  @apply border-primary text-foreground;
}

/* Стили для таблиц в стиле Пачка */
.pachka-table-avatar {
  @apply w-8 h-8 rounded-full mr-2 inline-block align-middle;
}

.pachka-table-row-with-avatar {
  @apply flex items-center;
}

.pachka-table-name {
  @apply font-medium;
}

.pachka-table-badge {
  @apply inline-flex ml-2 w-4 h-4 bg-green-400 rounded-full text-xs text-white justify-center items-center;
}

/* Скролл из дизайн-системы */
.scrollbar-pachka {
  @apply scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700 scrollbar-track-transparent;
}

/* Файловые карточки из дизайн-системы */
.file-card {
  @apply flex items-center p-3 bg-card border border-border rounded-md;
}

.file-icon {
  @apply rounded-md w-8 h-8 flex items-center justify-center text-white;
}

.audio-player {
  @apply flex items-center p-3 bg-card border border-border rounded-md;
}

/* Классы для формирования чата */
.chat-message {
  @apply p-4 rounded-lg max-w-xl;
}

.chat-message-own {
  @apply bg-primary-soft;
}

.chat-message-other {
  @apply bg-card-high;
}

.chat-input {
  @apply border border-border rounded-md p-2 w-full;
}

/* Дополнительные утилиты для форм */
.input-has-value {
  @apply border-primary/70 bg-background text-foreground;
}

/* Стили для всплывающих элементов */
.rdp {
  @apply bg-card border border-border rounded-md shadow-lg;
}

.rdp-month {
  @apply bg-card;
}

[data-radix-popper-content-wrapper] {
  @apply backdrop-blur-none !important;
}

/* Animation utilities */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { 
    opacity: 0;
    transform: translateY(10px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from { 
    opacity: 0;
    transform: scale(0.96);
  }
  to { 
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes pop-top3 {
  0% {
    opacity: 0;
    transform: scale(0.7);
  }
  60% {
    opacity: 1;
    transform: scale(1.08);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out forwards;
}

.animate-slide-up {
  animation: slideUp 0.4s ease-out forwards;
}

.animate-scale-in {
  animation: scaleIn 0.3s ease-out forwards;
}

.animate-delay-100 {
  animation-delay: 100ms;
}

.animate-delay-200 {
  animation-delay: 200ms;
}

.animate-delay-300 {
  animation-delay: 300ms;
}

.transition-all {
  transition: all 0.3s ease;
}

.transition-transform {
  transition: transform 0.3s ease;
}

.animate-pop-top3 {
  animation: pop-top3 0.7s cubic-bezier(0.23, 1.02, 0.32, 1) both;
}

.shadow-gold-glow {
  box-shadow: 0 0 0 3px #fde68a, 0 2px 12px 0 #fbbf24cc;
}
.shadow-silver-glow {
  box-shadow: 0 0 0 3px #e5e7eb, 0 2px 12px 0 #a3a3a3cc;
}
.shadow-bronze-glow {
  box-shadow: 0 0 0 3px #fcd34d, 0 2px 12px 0 #b45309cc;
}

.top3-avatar-animate {
  animation: pop-top3 0.7s cubic-bezier(0.23, 1.02, 0.32, 1) both;
}

@keyframes top1-pulse {
  0%, 100% { box-shadow: 0 0 0 3px #fde68a, 0 0 16px 4px #fbbf24cc; }
  50% { box-shadow: 0 0 0 6px #fde68a, 0 0 32px 8px #fbbf24cc; }
}
.top1-anim,
.top2-anim,
.top3-anim {
  border-width: 1px !important;
  transition: box-shadow 0.3s, border-color 0.3s;
}

.top1-anim:hover {
  animation: top1-pulse 1.2s infinite cubic-bezier(0.4,0,0.2,1);
  border-color: #fde68a !important;
}

.top2-anim:hover {
  animation: top2-gradient 1.5s infinite linear;
  border-width: 1px !important;
}

.top3-anim:hover {
  animation: top3-bounce 0.7s cubic-bezier(0.23, 1.02, 0.32, 1) both;
  border-color: #b45309 !important;
  border-width: 1px !important;
}

@keyframes top2-gradient {
  0% { border-color: #e5e7eb; }
  25% { border-color: #a3a3a3; }
  50% { border-color: #cbd5e1; }
  75% { border-color: #e5e7eb; }
  100% { border-color: #e5e7eb; }
}

@keyframes top3-bounce {
  0% { transform: scale(0.7); opacity: 0; }
  60% { transform: scale(1.15); opacity: 1; }
  80% { transform: scale(0.95); }
  100% { transform: scale(1); }
}

.clap-emoji {
  position: absolute;
  left: 0;
  top: 0;
  opacity: 0;
  font-size: 1rem;
  pointer-events: none;
  transform: translate(-50%, -50%) scale(0.5);
  transition: none;
  text-shadow: 0 0 8px #fff, 0 0 16px #ffe066, 0 0 24px #ffb300;
}
.clap-1-anim {
  animation: clap1 0.7s cubic-bezier(0.23,1.02,0.32,1) forwards;
}
.clap-2-anim {
  animation: clap2 0.7s 0.08s cubic-bezier(0.23,1.02,0.32,1) forwards;
}
.clap-3-anim {
  animation: clap3 0.7s 0.16s cubic-bezier(0.23,1.02,0.32,1) forwards;
}
@keyframes clap1 {
  0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5) rotate(-10deg); }
  60% { opacity: 1; transform: translate(-70%, -70%) scale(1.1) rotate(-10deg); }
  100% { opacity: 0; transform: translate(-90%, -90%) scale(0.7) rotate(-10deg); }
}
@keyframes clap2 {
  0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5) rotate(0deg); }
  60% { opacity: 1; transform: translate(0%, -80%) scale(1.1) rotate(0deg); }
  100% { opacity: 0; transform: translate(0%, -110%) scale(0.7) rotate(0deg); }
}
@keyframes clap3 {
  0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5) rotate(10deg); }
  60% { opacity: 1; transform: translate(60%, -60%) scale(1.1) rotate(10deg); }
  100% { opacity: 0; transform: translate(80%, -80%) scale(0.7) rotate(10deg); }
}

/* Анимация короны для первого места */
@keyframes crown-shine {
  0% { transform: translateY(0px) scale(1); opacity: 0.7; }
  50% { transform: translateY(-2px) scale(1.05); opacity: 1; }
  100% { transform: translateY(0px) scale(1); opacity: 0.7; }
}

@keyframes avatar-glow {
  0% { box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.5), 0 0 10px 2px rgba(255, 215, 0, 0.3); }
  50% { box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.7), 0 0 20px 5px rgba(255, 215, 0, 0.5); }
  100% { box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.5), 0 0 10px 2px rgba(255, 215, 0, 0.3); }
}

.top1-crown {
  position: absolute;
  top: -10px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.85rem;
  opacity: 0;
  transition: opacity 0.3s, transform 0.3s;
  pointer-events: none;
}

.top1-container:hover .top1-crown {
  opacity: 1;
  animation: crown-shine 1.5s infinite ease-in-out;
}

.top1-container:hover .top1-avatar {
  animation: avatar-glow 2s infinite ease-in-out;
  border-color: gold !important;
}

/* Эффект блеска для короны */
@keyframes sparkle {
  0%, 100% { opacity: 0; }
  50% { opacity: 1; }
}

.sparkle {
  position: absolute;
  background: white;
  border-radius: 50%;
  transform: rotate(45deg);
}

.sparkle-1 {
  width: 3px;
  height: 3px;
  top: -5px;
  left: 3px;
  animation: sparkle 1.2s 0.2s infinite;
}

.sparkle-2 {
  width: 2px;
  height: 2px;
  top: -2px;
  right: 2px;
  animation: sparkle 1.2s 0.5s infinite;
}

.sparkle-3 {
  width: 2px;
  height: 2px;
  bottom: 2px;
  left: 0px;
  animation: sparkle 1.2s 0.7s infinite;
}

/* Анимации для мини-игры */
@keyframes floatUp {
  0% { 
    opacity: 0.9; 
    transform: translateY(0);
  }
  80% {
    opacity: 0.9;
  }
  100% { 
    opacity: 0; 
    transform: translateY(-40px);
  }
}

/* Анимация для смайликов, которые скоро исчезнут с экрана */
@keyframes flickerDown {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* Анимация для редких смайликов */
@keyframes rarePulse {
  0% { transform: scale(1); filter: brightness(1); }
  50% { transform: scale(1.1); filter: brightness(1.2); }
  100% { transform: scale(1); filter: brightness(1); }
}

/* Анимация для эпических смайликов */
@keyframes epicGlow {
  0% { filter: drop-shadow(0 0 5px rgba(139,92,246,0.4)); }
  50% { filter: drop-shadow(0 0 8px rgba(139,92,246,0.8)); }
  100% { filter: drop-shadow(0 0 5px rgba(139,92,246,0.4)); }
}

/* Анимация для специальных смайликов */
@keyframes specialSpin {
  0% { transform: rotate(0deg) scale(1); }
  50% { transform: rotate(180deg) scale(1.2); }
  100% { transform: rotate(360deg) scale(1); }
}

.emoji-rare {
  animation: rarePulse 1.2s infinite;
}

.emoji-epic {
  animation: epicGlow 1.5s infinite;
}

.emoji-special {
  animation: specialSpin 2s infinite;
}

.float-score {
  animation: floatUp 0.8s forwards;
}

/* Стили для аватарки в игре */
.shadow-glow {
  animation: avatar-glow 2s infinite;
}

@keyframes avatar-glow {
  0% { filter: drop-shadow(0 0 3px rgba(139, 92, 246, 0.6)); }
  50% { filter: drop-shadow(0 0 12px rgba(139, 92, 246, 0.9)); }
  100% { filter: drop-shadow(0 0 3px rgba(139, 92, 246, 0.6)); }
}

/* Анимация вращения короны */
@keyframes crown-spin {
  0% { transform: rotate(-10deg); }
  50% { transform: rotate(10deg); }
  100% { transform: rotate(-10deg); }
}

/* Анимация для последнего активного сердечка */
@keyframes pulse {
  0%, 100% { transform: scale(1); filter: brightness(1); }
  50% { transform: scale(1.15); filter: brightness(1.1); }
}

/* Анимация появления новой жизни */
@keyframes new-life {
  0% { 
    opacity: 0; 
    transform: translate(-50%, 10px) scale(0.8);
  }
  20% {
    opacity: 1;
    transform: translate(-50%, 0) scale(1.2);
  }
  80% {
    opacity: 1;
    transform: translate(-50%, -15px) scale(1);
  }
  100% { 
    opacity: 0;
    transform: translate(-50%, -30px) scale(0.8);
  }
}

.new-life-animation {
  animation: new-life 1.5s ease-out forwards;
  z-index: 100;
}

/* Анимация для звуковой волны */
@keyframes soundwave-expand {
  0% {
    width: 10px;
    height: 10px;
    opacity: 0.2;
    box-shadow: 0 0 10px rgba(255, 153, 0, 0.3);
    border-width: 2px;
  }
  40% {
    opacity: 0.8;
    box-shadow: 0 0 30px rgba(255, 153, 0, 0.5);
    border-width: 8px;
  }
  100% {
    width: 1000px;
    height: 1000px;
    opacity: 0;
    box-shadow: 0 0 50px rgba(255, 153, 0, 0.1);
    border-width: 1px;
  }
}

.soundwave-effect {
  pointer-events: none;
  mix-blend-mode: screen;
  border-style: solid;
  border-color: rgba(255, 153, 0, 0.5);
}

/* Вариации звуковой волны (концентрические круги) */
.soundwave-effect-outer {
  opacity: 0.4;
  border-color: rgba(255, 153, 0, 0.3);
  animation-delay: 0.2s;
}

.soundwave-effect-inner {
  opacity: 0.7;
  border-color: rgba(255, 153, 0, 0.7);
  animation-delay: 0.1s;
}

/* Анимация вибрации для активации суперспособности */
@keyframes power-pulse {
  0% { transform: scale(1); filter: brightness(1); box-shadow: 0 0 5px rgba(139, 92, 246, 0.3); }
  50% { transform: scale(1.15); filter: brightness(1.5); box-shadow: 0 0 15px rgba(139, 92, 246, 0.8); }
  100% { transform: scale(1); filter: brightness(1); box-shadow: 0 0 5px rgba(139, 92, 246, 0.3); }
}

.power-pulse {
  animation: power-pulse 1s ease-in-out infinite;
}

/* Анимация яркой вспышки перед активацией суперспособности */
@keyframes bright-flash {
  0% { filter: brightness(1); transform: scale(1); box-shadow: 0 0 5px rgba(139, 92, 246, 0.3); }
  50% { filter: brightness(2.5); transform: scale(1.3); box-shadow: 0 0 25px rgba(139, 92, 246, 1); }
  100% { filter: brightness(1); transform: scale(1); box-shadow: 0 0 5px rgba(139, 92, 246, 0.3); }
}

.bright-flash {
  animation: bright-flash 0.3s ease-in-out;
}

/* Анимация удаления суперспособности */
@keyframes fade-out-rotate {
  0% { opacity: 1; transform: rotate(0deg) scale(1); }
  50% { opacity: 0.5; transform: rotate(180deg) scale(0.5); }
  100% { opacity: 0; transform: rotate(360deg) scale(0); }
}

.power-remove {
  animation: fade-out-rotate 0.4s ease-in-out forwards;
}
